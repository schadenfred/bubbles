  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = ?, "updated_at" = ? WHERE "ar_internal_metadata"."key" = ?[0m  [["value", "test"], ["updated_at", "2018-01-08 22:41:55.991629"], ["key", "environment"]]
  [1m[35m (8.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (17.8ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (16.9ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.9ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (24.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (25.0ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (22.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (9.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 22:42:04.700232"], ["updated_at", "2018-01-08 22:42:04.700232"]]
  [1m[35m (15.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (18.9ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (22.1ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (24.0ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (35.0ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (18.9ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (18.3ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (16.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (15.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (18.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 22:42:31.361174"], ["updated_at", "2018-01-08 22:42:31.361174"]]
  [1m[35m (8.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (25.4ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (30.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (12.5ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (24.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.4ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (23.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (17.9ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (23.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (19.2ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (15.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (15.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 22:42:56.078705"], ["updated_at", "2018-01-08 22:42:56.078705"]]
  [1m[35m (8.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (17.0ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (24.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (24.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.5ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (23.5ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.8ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (16.7ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (8.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (20.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 22:43:36.657939"], ["updated_at", "2018-01-08 22:43:36.657939"]]
  [1m[35m (8.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (25.1ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (17.3ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (28.4ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.5ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.8ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (24.0ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (23.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (25.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (9.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (26.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 22:43:47.974683"], ["updated_at", "2018-01-08 22:43:47.974683"]]
  [1m[35m (8.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (29.8ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (28.9ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.5ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (29.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (17.7ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (23.2ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (9.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (21.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (21.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 22:58:39.368002"], ["updated_at", "2018-01-08 22:58:39.368002"]]
  [1m[35m (8.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (41.4ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (17.8ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (35.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (23.5ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (30.0ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (16.9ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (22.8ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (17.5ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (8.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (8.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 23:01:33.326231"], ["updated_at", "2018-01-08 23:01:33.326231"]]
  [1m[35m (14.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (23.5ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (24.3ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (23.4ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (31.6ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (23.9ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (24.9ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (18.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (19.4ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (17.9ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (14.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (14.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (24.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 23:02:39.443542"], ["updated_at", "2018-01-08 23:02:39.443542"]]
  [1m[35m (15.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (17.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (22.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106031913"]]
  [1m[35m (16.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateButtaflyMappings (20180106034152)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106034152"]]
  [1m[35m (23.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateButtaflyLegends (20180106034801)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106034801"]]
  [1m[35m (17.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateWines (20180106075709)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075709"]]
  [1m[35m (22.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateWineries (20180106075729)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075729"]]
  [1m[35m (17.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateUsers (20180106075759)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075759"]]
  [1m[35m (23.0ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateReviews (20180106075828)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075828"]]
  [1m[35m (11.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 23:03:52.629895"], ["updated_at", "2018-01-08 23:03:52.629895"]]
  [1m[35m (14.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:10:07.689698', '2018-01-08 23:10:07.689698', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:10:07.689698', '2018-01-08 23:10:07.689698', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:10:07.693458', '2018-01-08 23:10:07.693458', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:10:07.693458', '2018-01-08 23:10:07.693458', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:10:07.695601', '2018-01-08 23:10:07.695601', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:10:07.695601', '2018-01-08 23:10:07.695601', 298486374)[0m
  [1m[35m (14.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:11:15.986927', '2018-01-08 23:11:15.986927', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:11:15.986927', '2018-01-08 23:11:15.986927', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:11:15.990777', '2018-01-08 23:11:15.990777', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:11:15.990777', '2018-01-08 23:11:15.990777', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:11:15.993126', '2018-01-08 23:11:15.993126', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:11:15.993126', '2018-01-08 23:11:15.993126', 298486374)[0m
  [1m[35m (13.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:12:23.878006', '2018-01-08 23:12:23.878006', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:12:23.878006', '2018-01-08 23:12:23.878006', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:12:23.886897', '2018-01-08 23:12:23.886897', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:12:23.886897', '2018-01-08 23:12:23.886897', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:12:23.889128', '2018-01-08 23:12:23.889128', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:12:23.889128', '2018-01-08 23:12:23.889128', 298486374)[0m
  [1m[35m (10.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:12:41.319162', '2018-01-08 23:12:41.319162', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:12:41.319162', '2018-01-08 23:12:41.319162', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:12:41.323121', '2018-01-08 23:12:41.323121', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:12:41.323121', '2018-01-08 23:12:41.323121', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:12:41.325500', '2018-01-08 23:12:41.325500', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:12:41.325500', '2018-01-08 23:12:41.325500', 298486374)[0m
  [1m[35m (16.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:13:06.359123', '2018-01-08 23:13:06.359123', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:13:06.359123', '2018-01-08 23:13:06.359123', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:13:06.362868', '2018-01-08 23:13:06.362868', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:13:06.362868', '2018-01-08 23:13:06.362868', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:13:06.365211', '2018-01-08 23:13:06.365211', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:13:06.365211', '2018-01-08 23:13:06.365211', 298486374)[0m
  [1m[35m (14.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
GetSome Feature Test: test_0001_the test is sound
-------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 15:13:06 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (7.2ms)
Completed 200 OK in 211ms (Views: 209.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:13:29.687947', '2018-01-08 23:13:29.687947', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:13:29.687947', '2018-01-08 23:13:29.687947', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:13:29.691855', '2018-01-08 23:13:29.691855', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:13:29.691855', '2018-01-08 23:13:29.691855', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:13:29.694296', '2018-01-08 23:13:29.694296', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:13:29.694296', '2018-01-08 23:13:29.694296', 298486374)[0m
  [1m[35m (29.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
GetSome Feature Test: test_0001_the test is sound
-------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 15:13:29 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (5.6ms)
Completed 200 OK in 164ms (Views: 162.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:13:56.775451', '2018-01-08 23:13:56.775451', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:13:56.775451', '2018-01-08 23:13:56.775451', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:13:56.779717', '2018-01-08 23:13:56.779717', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:13:56.779717', '2018-01-08 23:13:56.779717', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:13:56.782275', '2018-01-08 23:13:56.782275', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:13:56.782275', '2018-01-08 23:13:56.782275', 298486374)[0m
  [1m[35m (26.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
GetSome Feature Test: test_0001_the test is sound
-------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 15:13:56 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (5.5ms)
Completed 200 OK in 290ms (Views: 288.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:14:12.723297', '2018-01-08 23:14:12.723297', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:14:12.723297', '2018-01-08 23:14:12.723297', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:14:12.726923', '2018-01-08 23:14:12.726923', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:14:12.726923', '2018-01-08 23:14:12.726923', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:14:12.729098', '2018-01-08 23:14:12.729098', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:14:12.729098', '2018-01-08 23:14:12.729098', 298486374)[0m
  [1m[35m (9.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
GetSome Feature Test: test_0001_the test is sound
-------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 15:14:12 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (5.2ms)
Completed 200 OK in 194ms (Views: 193.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.6ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:14:17.995394', '2018-01-08 23:14:17.995394', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:14:17.995394', '2018-01-08 23:14:17.995394', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:14:18.002094', '2018-01-08 23:14:18.002094', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:14:18.002094', '2018-01-08 23:14:18.002094', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:14:18.004559', '2018-01-08 23:14:18.004559', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:14:18.004559', '2018-01-08 23:14:18.004559', 298486374)[0m
  [1m[35m (14.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
GetSome Feature Test: test_0001_the test is sound
-------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 15:14:18 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (7.9ms)
Completed 200 OK in 174ms (Views: 172.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:17:24.681543', '2018-01-08 23:17:24.681543', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:17:24.681543', '2018-01-08 23:17:24.681543', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:17:24.686358', '2018-01-08 23:17:24.686358', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:17:24.686358', '2018-01-08 23:17:24.686358', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:17:24.689192', '2018-01-08 23:17:24.689192', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:17:24.689192', '2018-01-08 23:17:24.689192', 298486374)[0m
  [1m[35m (8.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_create_content
------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:17:58.117567', '2018-01-08 23:17:58.117567', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:17:58.117567', '2018-01-08 23:17:58.117567', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:17:58.121236', '2018-01-08 23:17:58.121236', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:17:58.121236', '2018-01-08 23:17:58.121236', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:17:58.123386', '2018-01-08 23:17:58.123386', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:17:58.123386', '2018-01-08 23:17:58.123386', 298486374)[0m
  [1m[35m (10.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:21:56.242014', '2018-01-08 23:21:56.242014', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:21:56.242014', '2018-01-08 23:21:56.242014', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:21:56.246001', '2018-01-08 23:21:56.246001', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:21:56.246001', '2018-01-08 23:21:56.246001', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:21:56.248275', '2018-01-08 23:21:56.248275', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:21:56.248275', '2018-01-08 23:21:56.248275', 298486374)[0m
  [1m[35m (14.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:22:35.881213', '2018-01-08 23:22:35.881213', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:22:35.881213', '2018-01-08 23:22:35.881213', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:22:35.884503', '2018-01-08 23:22:35.884503', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:22:35.884503', '2018-01-08 23:22:35.884503', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:22:35.886614', '2018-01-08 23:22:35.886614', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:22:35.886614', '2018-01-08 23:22:35.886614', 298486374)[0m
  [1m[35m (15.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
  [1m[36mButtafly::Spreadsheet Load (0.2ms)[0m  [1m[34mSELECT  "buttafly_spreadsheets".* FROM "buttafly_spreadsheets" WHERE "buttafly_spreadsheets"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 15:22:36 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.9ms)
Completed 200 OK in 154ms (Views: 152.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:22:41.536389', '2018-01-08 23:22:41.536389', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:22:41.536389', '2018-01-08 23:22:41.536389', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:22:41.541161', '2018-01-08 23:22:41.541161', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:22:41.541161', '2018-01-08 23:22:41.541161', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:22:41.543656', '2018-01-08 23:22:41.543656', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:22:41.543656', '2018-01-08 23:22:41.543656', 298486374)[0m
  [1m[35m (23.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
  [1m[36mButtafly::Spreadsheet Load (0.2ms)[0m  [1m[34mSELECT  "buttafly_spreadsheets".* FROM "buttafly_spreadsheets" WHERE "buttafly_spreadsheets"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 15:22:41 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (19.7ms)
Completed 200 OK in 168ms (Views: 167.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:24:29.109625', '2018-01-08 23:24:29.109625', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-08 23:24:29.109625', '2018-01-08 23:24:29.109625', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:24:29.113200', '2018-01-08 23:24:29.113200', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-08 23:24:29.113200', '2018-01-08 23:24:29.113200', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:24:29.115370', '2018-01-08 23:24:29.115370', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-08 23:24:29.115370', '2018-01-08 23:24:29.115370', 298486374)[0m
  [1m[35m (22.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
  [1m[36mButtafly::Spreadsheet Load (0.2ms)[0m  [1m[34mSELECT  "buttafly_spreadsheets".* FROM "buttafly_spreadsheets" WHERE "buttafly_spreadsheets"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 15:24:29 -0800
Processing by Buttafly::ContentsController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_legends"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_mappings"[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (17.7ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "buttafly_spreadsheets"[0m
  [1m[35m (16.7ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (29.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (16.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reviews"[0m
  [1m[35m (17.3ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (19.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "wineries"[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "wines"[0m
  [1m[35m (16.8ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (8.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180106075828)[0m
  [1m[35m (8.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180106075759),
(20180106075729),
(20180106075709);

[0m
  [1m[35m (23.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 23:36:10.338263"], ["updated_at", "2018-01-08 23:36:10.338263"]]
  [1m[35m (8.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (19.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (17.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateButtaflySpreadsheets (20180106031913)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "buttafly_spreadsheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "uploader_id" integer, "imported_at" datetime, "processed_at" datetime, "row_count" integer, "mtime" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_uploader_id" ON "buttafly_spreadsheets" ("uploader_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_name" ON "buttafly_spreadsheets" ("name")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_imported_at" ON "buttafly_spreadsheets" ("imported_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_processed_at" ON "buttafly_spreadsheets" ("processed_at")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_spreadsheets_on_aasm_state" ON "buttafly_spreadsheets" ("aasm_state")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106031913"]]
  [1m[35m (16.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateButtaflyMappings (20180106034152)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "buttafly_mappings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "legend_id" integer, "originable_id" integer, "originable_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE  INDEX "index_buttafly_mappings_on_originable_id_and_originable_type" ON "buttafly_mappings" ("originable_id", "originable_type")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106034152"]]
  [1m[35m (16.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateButtaflyLegends (20180106034801)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "buttafly_legends" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "data" text, "targetable_model" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106034801"]]
  [1m[35m (16.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateWines (20180106075709)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "wines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "vintage" varchar, "winery_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075709"]]
  [1m[35m (17.0ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateWineries (20180106075729)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "wineries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "mission" varchar, "history" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075729"]]
  [1m[35m (16.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateUsers (20180106075759)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075759"]]
  [1m[35m (10.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateReviews (20180106075828)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "rating" integer, "content" varchar, "reviewer_id" integer, "wine_id" varchar, "integer" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180106075828"]]
  [1m[35m (15.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateExcelSheets (20180108233536)
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "excel_sheets" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "flat_file" varchar, "aasm_state" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180108233536"]]
  [1m[35m (16.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-01-08 23:37:24.672181"], ["updated_at", "2018-01-08 23:37:24.672181"]]
  [1m[35m (20.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_aasm_state' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_processed_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_imported_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_name' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_spreadsheets_on_uploader_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_contents"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_contents"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_contents"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_contents"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_contents"[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:09:59.985409', '2018-01-09 00:09:59.985409', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:09:59.985409', '2018-01-09 00:09:59.985409', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:09:59.989508', '2018-01-09 00:09:59.989508', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:09:59.989508', '2018-01-09 00:09:59.989508', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:09:59.991783', '2018-01-09 00:09:59.991783', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:09:59.991783', '2018-01-09 00:09:59.991783', 298486374)[0m
  [1m[35m (22.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:10:22.215356', '2018-01-09 00:10:22.215356', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:10:22.215356', '2018-01-09 00:10:22.215356', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:10:22.218843', '2018-01-09 00:10:22.218843', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:10:22.218843', '2018-01-09 00:10:22.218843', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:10:22.221093', '2018-01-09 00:10:22.221093', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:10:22.221093', '2018-01-09 00:10:22.221093', 298486374)[0m
  [1m[35m (23.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:19.575226', '2018-01-09 00:11:19.575226', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:19.575226', '2018-01-09 00:11:19.575226', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:19.579251', '2018-01-09 00:11:19.579251', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:19.579251', '2018-01-09 00:11:19.579251', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:19.581445', '2018-01-09 00:11:19.581445', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:19.581445', '2018-01-09 00:11:19.581445', 298486374)[0m
  [1m[35m (10.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:33.304930', '2018-01-09 00:11:33.304930', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:33.304930', '2018-01-09 00:11:33.304930', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:33.309126', '2018-01-09 00:11:33.309126', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:33.309126', '2018-01-09 00:11:33.309126', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:33.311337', '2018-01-09 00:11:33.311337', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:33.311337', '2018-01-09 00:11:33.311337', 298486374)[0m
  [1m[35m (17.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:48.320573', '2018-01-09 00:11:48.320573', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:48.320573', '2018-01-09 00:11:48.320573', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:48.324664', '2018-01-09 00:11:48.324664', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:48.324664', '2018-01-09 00:11:48.324664', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:48.326943', '2018-01-09 00:11:48.326943', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:48.326943', '2018-01-09 00:11:48.326943', 298486374)[0m
  [1m[35m (10.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:56.922432', '2018-01-09 00:11:56.922432', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:11:56.922432', '2018-01-09 00:11:56.922432', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:56.926300', '2018-01-09 00:11:56.926300', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:11:56.926300', '2018-01-09 00:11:56.926300', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:56.928824', '2018-01-09 00:11:56.928824', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:11:56.928824', '2018-01-09 00:11:56.928824', 298486374)[0m
  [1m[35m (22.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:20:24.599721', '2018-01-09 00:20:24.599721', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:20:24.599721', '2018-01-09 00:20:24.599721', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:20:24.603520', '2018-01-09 00:20:24.603520', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:20:24.603520', '2018-01-09 00:20:24.603520', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:20:24.605679', '2018-01-09 00:20:24.605679', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:20:24.605679', '2018-01-09 00:20:24.605679', 298486374)[0m
  [1m[35m (16.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:21:38.728256', '2018-01-09 00:21:38.728256', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:21:38.728256', '2018-01-09 00:21:38.728256', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:21:38.731739', '2018-01-09 00:21:38.731739', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:21:38.731739', '2018-01-09 00:21:38.731739', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:21:38.733922', '2018-01-09 00:21:38.733922', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:21:38.733922', '2018-01-09 00:21:38.733922', 298486374)[0m
  [1m[35m (10.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:21:38 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.5ms)
Completed 200 OK in 118983ms (Views: 189.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:24:10.628676', '2018-01-09 00:24:10.628676', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:24:10.628676', '2018-01-09 00:24:10.628676', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:24:10.632042', '2018-01-09 00:24:10.632042', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:24:10.632042', '2018-01-09 00:24:10.632042', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:24:10.634760', '2018-01-09 00:24:10.634760', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:24:10.634760', '2018-01-09 00:24:10.634760', 298486374)[0m
  [1m[35m (26.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:24:10 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.7ms)
Completed 200 OK in 7080ms (Views: 151.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:25:54.615837', '2018-01-09 00:25:54.615837', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:25:54.615837', '2018-01-09 00:25:54.615837', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:25:54.619418', '2018-01-09 00:25:54.619418', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:25:54.619418', '2018-01-09 00:25:54.619418', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:25:54.621996', '2018-01-09 00:25:54.621996', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:25:54.621996', '2018-01-09 00:25:54.621996', 298486374)[0m
  [1m[35m (23.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:25:54 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (14.6ms)
Completed 200 OK in 53255ms (Views: 160.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:26:50.851713', '2018-01-09 00:26:50.851713', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:26:50.851713', '2018-01-09 00:26:50.851713', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:26:50.855033', '2018-01-09 00:26:50.855033', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:26:50.855033', '2018-01-09 00:26:50.855033', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:26:50.857737', '2018-01-09 00:26:50.857737', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:26:50.857737', '2018-01-09 00:26:50.857737', 298486374)[0m
  [1m[35m (22.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:26:50 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (13.1ms)
Completed 200 OK in 5772ms (Views: 152.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:27:56.150680', '2018-01-09 00:27:56.150680', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:27:56.150680', '2018-01-09 00:27:56.150680', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:27:56.154695', '2018-01-09 00:27:56.154695', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:27:56.154695', '2018-01-09 00:27:56.154695', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:27:56.157336', '2018-01-09 00:27:56.157336', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:27:56.157336', '2018-01-09 00:27:56.157336', 298486374)[0m
  [1m[35m (23.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:27:56 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (14.6ms)
Completed 200 OK in 149651ms (Views: 149.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:34:56.072704', '2018-01-09 00:34:56.072704', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:34:56.072704', '2018-01-09 00:34:56.072704', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:34:56.076004', '2018-01-09 00:34:56.076004', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:34:56.076004', '2018-01-09 00:34:56.076004', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:34:56.078098', '2018-01-09 00:34:56.078098', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:34:56.078098', '2018-01-09 00:34:56.078098', 298486374)[0m
  [1m[35m (10.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:34:56 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (14.7ms)
Completed 200 OK in 61223ms (Views: 152.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:36:00.462823', '2018-01-09 00:36:00.462823', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:36:00.462823', '2018-01-09 00:36:00.462823', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:36:00.466107', '2018-01-09 00:36:00.466107', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:36:00.466107', '2018-01-09 00:36:00.466107', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:36:00.468189', '2018-01-09 00:36:00.468189', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:36:00.468189', '2018-01-09 00:36:00.468189', 298486374)[0m
  [1m[35m (16.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:36:00 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (16.6ms)
Completed 200 OK in 50111ms (Views: 156.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:41:39.933981', '2018-01-09 00:41:39.933981', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:41:39.933981', '2018-01-09 00:41:39.933981', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:41:39.937656', '2018-01-09 00:41:39.937656', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:41:39.937656', '2018-01-09 00:41:39.937656', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:41:39.940059', '2018-01-09 00:41:39.940059', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:41:39.940059', '2018-01-09 00:41:39.940059', 298486374)[0m
  [1m[35m (25.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:41:39 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (14.0ms)
Completed 200 OK in 165ms (Views: 163.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:41:53.189316', '2018-01-09 00:41:53.189316', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:41:53.189316', '2018-01-09 00:41:53.189316', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:41:53.193800', '2018-01-09 00:41:53.193800', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:41:53.193800', '2018-01-09 00:41:53.193800', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:41:53.196623', '2018-01-09 00:41:53.196623', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:41:53.196623', '2018-01-09 00:41:53.196623', 298486374)[0m
  [1m[35m (10.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:41:53 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (13.0ms)
Completed 200 OK in 169ms (Views: 168.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:28.972989', '2018-01-09 00:43:28.972989', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:28.972989', '2018-01-09 00:43:28.972989', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:28.976979', '2018-01-09 00:43:28.976979', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:28.976979', '2018-01-09 00:43:28.976979', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:28.979468', '2018-01-09 00:43:28.979468', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:28.979468', '2018-01-09 00:43:28.979468', 298486374)[0m
  [1m[35m (10.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:43:29 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.3ms)
Completed 200 OK in 162ms (Views: 160.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:37.969156', '2018-01-09 00:43:37.969156', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:37.969156', '2018-01-09 00:43:37.969156', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:37.972438', '2018-01-09 00:43:37.972438', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:37.972438', '2018-01-09 00:43:37.972438', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:37.974533', '2018-01-09 00:43:37.974533', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:37.974533', '2018-01-09 00:43:37.974533', 298486374)[0m
  [1m[35m (17.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:41.098132', '2018-01-09 00:43:41.098132', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:41.098132', '2018-01-09 00:43:41.098132', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:41.101722', '2018-01-09 00:43:41.101722', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:41.101722', '2018-01-09 00:43:41.101722', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:41.103764', '2018-01-09 00:43:41.103764', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:41.103764', '2018-01-09 00:43:41.103764', 298486374)[0m
  [1m[35m (16.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:49.399298', '2018-01-09 00:43:49.399298', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:43:49.399298', '2018-01-09 00:43:49.399298', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:49.402704', '2018-01-09 00:43:49.402704', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:43:49.402704', '2018-01-09 00:43:49.402704', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:49.404836', '2018-01-09 00:43:49.404836', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:43:49.404836', '2018-01-09 00:43:49.404836', 298486374)[0m
  [1m[35m (17.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:43:49 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.5ms)
Completed 200 OK in 144ms (Views: 142.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:44:02.495146', '2018-01-09 00:44:02.495146', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:44:02.495146', '2018-01-09 00:44:02.495146', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:44:02.498545', '2018-01-09 00:44:02.498545', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:44:02.498545', '2018-01-09 00:44:02.498545', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:44:02.500918', '2018-01-09 00:44:02.500918', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:44:02.500918', '2018-01-09 00:44:02.500918', 298486374)[0m
  [1m[35m (17.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:44:02 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.3ms)
Completed 200 OK in 147ms (Views: 145.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:48:57.798385', '2018-01-09 00:48:57.798385', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:48:57.798385', '2018-01-09 00:48:57.798385', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:48:57.801775', '2018-01-09 00:48:57.801775', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:48:57.801775', '2018-01-09 00:48:57.801775', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:48:57.803933', '2018-01-09 00:48:57.803933', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:48:57.803933', '2018-01-09 00:48:57.803933', 298486374)[0m
  [1m[35m (15.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:48:57 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (13.6ms)
Completed 200 OK in 187ms (Views: 186.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:49:09.406736', '2018-01-09 00:49:09.406736', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:49:09.406736', '2018-01-09 00:49:09.406736', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:49:09.411555', '2018-01-09 00:49:09.411555', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:49:09.411555', '2018-01-09 00:49:09.411555', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:49:09.414046', '2018-01-09 00:49:09.414046', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:49:09.414046', '2018-01-09 00:49:09.414046', 298486374)[0m
  [1m[35m (16.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:49:09 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.4ms)
Completed 200 OK in 150ms (Views: 149.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:49:47.623794', '2018-01-09 00:49:47.623794', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:49:47.623794', '2018-01-09 00:49:47.623794', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:49:47.627190', '2018-01-09 00:49:47.627190', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:49:47.627190', '2018-01-09 00:49:47.627190', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:49:47.629273', '2018-01-09 00:49:47.629273', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:49:47.629273', '2018-01-09 00:49:47.629273', 298486374)[0m
  [1m[35m (15.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:49:47 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.6ms)
Completed 200 OK in 202ms (Views: 200.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:50:40.542944', '2018-01-09 00:50:40.542944', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:50:40.542944', '2018-01-09 00:50:40.542944', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:50:40.547638', '2018-01-09 00:50:40.547638', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:50:40.547638', '2018-01-09 00:50:40.547638', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:50:40.550147', '2018-01-09 00:50:40.550147', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:50:40.550147', '2018-01-09 00:50:40.550147', 298486374)[0m
  [1m[35m (22.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:50:40 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (14.8ms)
Completed 200 OK in 166ms (Views: 165.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:50:40 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.4ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:51:16.393967', '2018-01-09 00:51:16.393967', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:51:16.393967', '2018-01-09 00:51:16.393967', 298486374)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:51:16.400516', '2018-01-09 00:51:16.400516', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:51:16.400516', '2018-01-09 00:51:16.400516', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:51:16.405662', '2018-01-09 00:51:16.405662', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:51:16.405662', '2018-01-09 00:51:16.405662', 298486374)[0m
  [1m[35m (16.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (5.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:51:16 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (14.3ms)
Completed 200 OK in 157ms (Views: 156.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:51:39.113939', '2018-01-09 00:51:39.113939', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:51:39.113939', '2018-01-09 00:51:39.113939', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:51:39.117366', '2018-01-09 00:51:39.117366', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:51:39.117366', '2018-01-09 00:51:39.117366', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:51:39.119737', '2018-01-09 00:51:39.119737', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:51:39.119737', '2018-01-09 00:51:39.119737', 298486374)[0m
  [1m[35m (21.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:51:39 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (13.1ms)
Completed 200 OK in 164ms (Views: 162.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:51:46.262665', '2018-01-09 00:51:46.262665', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:51:46.262665', '2018-01-09 00:51:46.262665', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:51:46.266456', '2018-01-09 00:51:46.266456', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:51:46.266456', '2018-01-09 00:51:46.266456', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:51:46.269714', '2018-01-09 00:51:46.269714', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:51:46.269714', '2018-01-09 00:51:46.269714', 298486374)[0m
  [1m[35m (22.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:51:46 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.4ms)
Completed 200 OK in 157ms (Views: 156.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:51:46 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:54:31.131407', '2018-01-09 00:54:31.131407', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:54:31.131407', '2018-01-09 00:54:31.131407', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:54:31.135063', '2018-01-09 00:54:31.135063', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:54:31.135063', '2018-01-09 00:54:31.135063', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:54:31.137282', '2018-01-09 00:54:31.137282', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:54:31.137282', '2018-01-09 00:54:31.137282', 298486374)[0m
  [1m[35m (8.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:54:31 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (18.6ms)
Completed 200 OK in 166ms (Views: 164.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:54:31 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:55:03.612705', '2018-01-09 00:55:03.612705', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:55:03.612705', '2018-01-09 00:55:03.612705', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:55:03.616409', '2018-01-09 00:55:03.616409', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:55:03.616409', '2018-01-09 00:55:03.616409', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:55:03.618586', '2018-01-09 00:55:03.618586', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:55:03.618586', '2018-01-09 00:55:03.618586', 298486374)[0m
  [1m[35m (10.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:55:03 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.8ms)
Completed 200 OK in 143ms (Views: 142.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:55:19.455655', '2018-01-09 00:55:19.455655', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:55:19.455655', '2018-01-09 00:55:19.455655', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:55:19.459118', '2018-01-09 00:55:19.459118', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:55:19.459118', '2018-01-09 00:55:19.459118', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:55:19.461400', '2018-01-09 00:55:19.461400', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:55:19.461400', '2018-01-09 00:55:19.461400', 298486374)[0m
  [1m[35m (10.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:55:19 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.4ms)
Completed 200 OK in 162ms (Views: 161.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:57:04.759838', '2018-01-09 00:57:04.759838', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 00:57:04.759838', '2018-01-09 00:57:04.759838', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:57:04.763844', '2018-01-09 00:57:04.763844', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 00:57:04.763844', '2018-01-09 00:57:04.763844', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:57:04.766121', '2018-01-09 00:57:04.766121', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 00:57:04.766121', '2018-01-09 00:57:04.766121', 298486374)[0m
  [1m[35m (10.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 16:57:04 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.9ms)
Completed 200 OK in 168ms (Views: 166.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 16:57:04 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:03:01.476719', '2018-01-09 01:03:01.476719', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:03:01.476719', '2018-01-09 01:03:01.476719', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:03:01.482436', '2018-01-09 01:03:01.482436', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:03:01.482436', '2018-01-09 01:03:01.482436', 298486374)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:03:01.485200', '2018-01-09 01:03:01.485200', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:03:01.485200', '2018-01-09 01:03:01.485200', 298486374)[0m
  [1m[35m (16.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:03:33.251964', '2018-01-09 01:03:33.251964', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:03:33.251964', '2018-01-09 01:03:33.251964', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:03:33.255344', '2018-01-09 01:03:33.255344', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:03:33.255344', '2018-01-09 01:03:33.255344', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:03:33.257475', '2018-01-09 01:03:33.257475', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:03:33.257475', '2018-01-09 01:03:33.257475', 298486374)[0m
  [1m[35m (11.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:03:45.313464', '2018-01-09 01:03:45.313464', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:03:45.313464', '2018-01-09 01:03:45.313464', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:03:45.317030', '2018-01-09 01:03:45.317030', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:03:45.317030', '2018-01-09 01:03:45.317030', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:03:45.319381', '2018-01-09 01:03:45.319381', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:03:45.319381', '2018-01-09 01:03:45.319381', 298486374)[0m
  [1m[35m (16.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 17:03:45 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.6ms)
Completed 200 OK in 153ms (Views: 151.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:04:15.764487', '2018-01-09 01:04:15.764487', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:04:15.764487', '2018-01-09 01:04:15.764487', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:04:15.767891', '2018-01-09 01:04:15.767891', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:04:15.767891', '2018-01-09 01:04:15.767891', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:04:15.770011', '2018-01-09 01:04:15.770011', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:04:15.770011', '2018-01-09 01:04:15.770011', 298486374)[0m
  [1m[35m (13.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 17:04:15 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.7ms)
Completed 200 OK in 142ms (Views: 141.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:04:45.919400', '2018-01-09 01:04:45.919400', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:04:45.919400', '2018-01-09 01:04:45.919400', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:04:45.923971', '2018-01-09 01:04:45.923971', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:04:45.923971', '2018-01-09 01:04:45.923971', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:04:45.926562', '2018-01-09 01:04:45.926562', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:04:45.926562', '2018-01-09 01:04:45.926562', 298486374)[0m
  [1m[35m (16.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 17:04:45 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (13.3ms)
Completed 200 OK in 160ms (Views: 159.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 17:04:46 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:04:56.458614', '2018-01-09 01:04:56.458614', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:04:56.458614', '2018-01-09 01:04:56.458614', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:04:56.462256', '2018-01-09 01:04:56.462256', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:04:56.462256', '2018-01-09 01:04:56.462256', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:04:56.464753', '2018-01-09 01:04:56.464753', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:04:56.464753', '2018-01-09 01:04:56.464753', 298486374)[0m
  [1m[35m (17.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 17:04:56 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.6ms)
Completed 200 OK in 143ms (Views: 141.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:07:14.912413', '2018-01-09 01:07:14.912413', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:07:14.912413', '2018-01-09 01:07:14.912413', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:07:14.915725', '2018-01-09 01:07:14.915725', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:07:14.915725', '2018-01-09 01:07:14.915725', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:07:14.917874', '2018-01-09 01:07:14.917874', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:07:14.917874', '2018-01-09 01:07:14.917874', 298486374)[0m
  [1m[35m (16.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 17:07:14 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (12.5ms)
Completed 200 OK in 164ms (Views: 162.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 17:07:15 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "buttafly_spreadsheets"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:20:02.854288', '2018-01-09 01:20:02.854288', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "buttafly_spreadsheets" ("name", "flat_file", "aasm_state", "uploader_id", "imported_at", "processed_at", "mtime", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 'MyString', 1, '2018-01-05 19:19:13', NULL, 1, '2018-01-09 01:20:02.854288', '2018-01-09 01:20:02.854288', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_mappings"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:20:02.859261', '2018-01-09 01:20:02.859261', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_mappings" ("legend_id", "originable_id", "originable_type", "created_at", "updated_at", "id") VALUES (1, 1, 'MyString', '2018-01-09 01:20:02.859261', '2018-01-09 01:20:02.859261', 298486374)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "buttafly_legends"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:20:02.862278', '2018-01-09 01:20:02.862278', 980190962)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "buttafly_legends" ("data", "created_at", "updated_at", "id") VALUES ('MyText', '2018-01-09 01:20:02.862278', '2018-01-09 01:20:02.862278', 298486374)[0m
  [1m[35m (15.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
ExcelSheet: test_0001_must be valid
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
CanConfigureOriginableModel Feature Test: test_0001_the test is sound
---------------------------------------------------------------------
Started GET "/buttafly" for 127.0.0.1 at 2018-01-08 17:20:02 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (21.9ms)
Completed 200 OK in 168ms (Views: 166.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
Buttafly::Legend: test_0001_    Then { assert_kind_of Module, Buttafly }

-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
Buttafly::Mapping::db: test_0001_columns & types
------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
Buttafly::Mapping::db: test_0003_associations
---------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Buttafly::Mapping::db: test_0002_indexes
----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_buttafly_mappings_on_originable_id_and_originable_type' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
Buttafly::Legend::db: test_0001_columns & types
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------------------------------------------------------------
Buttafly::Spreadsheet::originable? must be true: test_0001_    Then { subject.originable?.must_equal true}

-----------------------------------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------
Buttafly::ContentsControllerTest: test_should_get_index
-------------------------------------------------------
Started GET "/buttafly/contents" for 127.0.0.1 at 2018-01-08 17:20:03 -0800
Processing by Buttafly::ContentsController#index as HTML
  Rendering /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application
  Rendered /home/schadenfred/work/opensource/engines/buttafly/buttafly/app/views/buttafly/contents/index.html.haml within layouts/buttafly/application (0.4ms)
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Wine::associations: test_0001_belongs to
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
Buttafly::Spreadsheet::associations: test_0001_belongs to
---------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
Review::associations: test_0001_belongs to
------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
Winery::associations: test_0001_has many
----------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Legend::associations: test_0001_belongs to
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------
Buttafly::Mapping: test_0001_    Then { assert_kind_of Class, Mapping }

------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------------------
Buttafly::Spreadsheet: test_0001_    Then { assert_kind_of Class, Spreadsheet }

--------------------------------------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
Buttafly::Spreadsheet::db: test_0001_columns & types
----------------------------------------------------
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
